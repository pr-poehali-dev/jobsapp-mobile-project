# Настройка доступа к админ-панели

## Требования безопасности

Доступ к админ-панели защищен:
- ✅ Шифрование паролей через bcrypt
- ✅ Проверка авторизации через backend API
- ✅ Ограничение доступа по номеру телефона и email
- ✅ Хранение сессии в localStorage с проверкой

## Разрешенные администраторы

Доступ разрешен только для:
- **Телефон**: +79992255109
- **Email**: ad.alex1995@yandex.ru

## Создание админского аккаунта

### Вариант 1: Через регистрацию на сайте

1. Откройте главную страницу приложения
2. Нажмите "Войти" → "Регистрация"
3. Выберите тип верификации (Email или SMS)
4. Заполните данные:
   - Имя: Администратор
   - Email: ad.alex1995@yandex.ru (или телефон: +79992255109)
   - Пароль: ваш_безопасный_пароль
5. Подтвердите регистрацию кодом
6. **ВАЖНО**: После регистрации измените роль пользователя на `admin`

### Вариант 2: Прямое добавление в БД

Выполните SQL запрос для создания админа с ролью `admin`:

```sql
-- Вставка администратора с bcrypt паролем
INSERT INTO users (
  name, 
  email, 
  phone, 
  password_hash, 
  role, 
  tier, 
  email_verified, 
  phone_verified
) VALUES (
  'Администратор',
  'ad.alex1995@yandex.ru',
  '+79992255109',
  '$2b$12$...',  -- bcrypt хеш пароля (сгенерируйте отдельно)
  'admin',
  'PREMIUM',
  TRUE,
  TRUE
);
```

### Генерация bcrypt хеша пароля

Используйте Python для генерации хеша:

```python
import bcrypt

password = "ваш_пароль_здесь"
salt = bcrypt.gensalt()
hashed = bcrypt.hashpw(password.encode('utf-8'), salt)
print(hashed.decode('utf-8'))
```

## Доступ к админ-панели

После создания аккаунта:

1. Перейдите на `/adm`
2. Введите логин (email или телефон): `ad.alex1995@yandex.ru` или `+79992255109`
3. Введите пароль
4. Система проверит:
   - Правильность пароля через bcrypt
   - Роль пользователя (должна быть `admin`)
   - Email/телефон из разрешенного списка

## Безопасность

- Пароли хранятся только в виде bcrypt хешей (необратимое шифрование)
- Старые SHA-256 хеши автоматически обновляются на bcrypt при входе
- Сессия хранится в localStorage и проверяется при каждом посещении
- При выходе сессия полностью удаляется

## Управление правами

Только аккаунты с:
- `role = 'admin'`
- Email `ad.alex1995@yandex.ru` ИЛИ телефон `+79992255109`

получат доступ к админ-панели.

## Возможности админ-панели

После входа доступны:
- ✅ Модерация вакансий (одобрение/отклонение)
- ✅ Управление пользователями (баланс, тариф)
- ✅ Статистика системы
- ✅ Просмотр деталей пользователей и вакансий
